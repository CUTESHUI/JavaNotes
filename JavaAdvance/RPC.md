## RPC

#### 简介

- Remote Procedure Call
- 远程过程调用
- 一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议
- 让分布式或者微服务系统中不同服务之间的调用像本地调用一样简单
- 比如两个不同的服务 A、B 部署在两台不同的机器上，那么服务 A 如果想要调用服务 B 中的某个方法该怎么办呢？使用 HTTP请求 当然可以，但是可能会比较慢而且一些优化做的并不好，RPC 的出现就是为了解决这个问题



#### 原理

- 服务消费方（client）调用以本地调用方式调用服务
- client stub接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体
- client stub找到服务地址，并将消息发送到服务端
- server stub收到消息后进行解码
- server stub根据解码结果调用本地的服务
- 本地服务执行并将结果返回给server stub
- server stub将返回结果打包成消息并发送至消费方
- client stub接收到消息，并进行解码
- 服务消费方得到最终结果



#### 常见RPC框架

- RMI
  - JDK自带
  - 有很多局限性，不推荐使用
- Dubbo
  - 阿里巴巴公司开源的一个高性能优秀的服务框架，使得应用可通过高性能的 RPC 实现服务的输出和输入功能，可以和 Spring框架无缝集成
  - 目前 Dubbo 已经成为 Spring Cloud Alibaba 中的官方组件
- gRPC
  - 可以在任何环境中运行的现代开源高性能RPC框架
  - 通过可插拔的支持来有效地连接数据中心内和跨数据中心的服务，以实现负载平衡，跟踪，运行状况检查和身份验证
  - 也适用于分布式计算的最后一英里，以将设备，移动应用程序和浏览器连接到后端服务
- Hessian
  - Hessian是一个轻量级的 remotingonhttp 工具，使用简单的方法提供了 RMI 的功能
  - 相比 WebService，Hessian 更简单、快捷
  - 采用的是二进制RPC协议，很适合于发送二进制数据
- Thrift
  - Apache Thrift 是 Facebook 开源的跨语言的 RPC 通信框架，目前已经捐献给 Apache 基金会管理
  - 由于其跨语言特性和出色的性能，在很多互联网公司得到应用
  - 有能力的公司甚至会基于 thrift 研发一套分布式服务框架，增加诸如服务注册、服务发现等功能