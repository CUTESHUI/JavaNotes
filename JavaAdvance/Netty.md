## Netty

#### BIO、NIO、AIO区别

- **BIO (Blocking I/O)**
  - 同步阻塞 I/O 模式，数据的读取写入必须阻塞在一个线程内等待其完成
  - 在客户端连接数量不高的情况下，是没问题的。但是，当面对十万甚至百万级连接的时候，传统的 BIO 模型就无能为力了
- **NIO (Non-blocking/New I/O)** 
  - NIO 是一种同步非阻塞的 I/O 模型，于 Java 1.4 中引入，对应 java.nio 包，提供了 Channel、Selector、Buffer 等抽象
  - NIO 中的 N 可以理解为 Non-blocking，它支持面向缓冲的，基于通道的 I/O 操作方法
  -  NIO 提供了与传统 BIO 模型中的 Socket 和 ServerSocket 相对应的 SocketChannel 和 ServerSocketChannel 两种不同的套接字通道实现，两种通道都支持阻塞和非阻塞两种模式
  - 对于高负载、高并发的（网络）应用，应使用 NIO 的非阻塞模式来开发
- **AIO (Asynchronous I/O)** 
  - AIO 也就是 NIO 2。在 Java 7 中引入了 NIO 的改进版 NIO 2,它是异步非阻塞的 IO 模型
  - AIO 是异步 IO 的缩写，异步 IO 是基于事件和回调机制实现的，也就是应用操作之后会直接返回，不会堵塞在那里，当后台处理完成，操作系统会通知相应的线程进行后续的操作
  - 虽然 NIO 在网络操作中，提供了非阻塞的方法，但是 NIO 的 IO 行为还是同步的
  - 对于 NIO 来说，我们的业务线程是在 IO 操作准备好时，得到通知，接着就由这个线程自行进行 IO 操作，IO 操作本身是同步的，Netty 之前也尝试使用过 AIO，不过又放弃了



#### Netty 是什么

- Netty 是一个 **基于 NIO** 的 client-server(客户端服务器)框架，使用它可以快速简单地开发网络应用程序
- 它极大地简化并优化了 TCP 和 UDP 套接字服务器等网络编程,并且性能以及安全性等很多方面甚至都要更好
- **支持多种协议**，如 FTP，SMTP，HTTP 以及各种二进制和基于文本的传统协议

- 官方：Netty 成功地找到了一种在不妥协可维护性和性能的情况下实现易于开发，性能，稳定性和灵活性的方法



#### 为什么用 Netty

- 统一的 API，支持多种传输类型，阻塞和非阻塞的
- 简单而强大的线程模型
- 自带编解码器解决 TCP 粘包/拆包问题
- 自带各种协议栈
- 真正的无连接数据包套接字支持
- 比直接使用 Java 核心 API 有更高的吞吐量、更低的延迟、更低的资源消耗和更少的内存复制
- 安全性不错，有完整的 SSL/TLS 以及 StartTLS 支持
- 社区活跃
- 成熟稳定，经历了大型项目的使用和考验，而且很多开源项目都使用到了 Netty， 比如我们经常接触的 Dubbo、RocketMQ 等



#### Netty 应用场景

理论上来说，NIO 可以做的事情 ，使用 Netty 都可以做并且更好。Netty 主要用来做网络通信 

- RPC 框架的网络通信工具
- HTTP 服务器
- 即时通讯系统
- 实现消息推送系统



#### Netty的核心组件

- Bytebuf（字节容器）
- Channel（网络操作抽象类）
- EventLoop（事件循环）